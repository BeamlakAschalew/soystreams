import{a as I,L as F,P as B,b as D,H as A,q as H,_ as T}from"./MainLayout.vue_vue_type_script_setup_true_lang-B62BA8Sx.js";import{d as M,e as P,k as w,c as i,o as a,f as s,t as y,h as b,i as V,g as _,u as g,l as j,a as C,n as Z,F as S,j as q,m as z,p as R,q as U,s as W,v as G}from"./app-DUn_P2hr.js";import{u as J}from"./useFavoritePodcastStore-zdbs7J6w.js";import{C as K,a as Q}from"./chevron-up-CDn4mUti.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const X={class:"episode-card py-4"},Y={class:"mb-2 flex items-center"},ee=["aria-label"],te={class:"absolute inset-0 h-full w-full",viewBox:"0 0 40 40"},se=["stroke-dashoffset"],ae={class:"relative z-10 flex items-center justify-center text-gray-800 dark:text-gray-300"},oe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-8 w-8"},re={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-7 w-7"},ie={class:"flex-grow"},le={class:"text-md font-semibold text-gray-800 dark:text-gray-200"},de={class:"text-sm text-gray-500 dark:text-gray-400"},ne={class:"ml-[3.25rem]"},ce={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"ml-1 inline-block h-4 w-4"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"ml-1 inline-block h-4 w-4"},pe={key:0,class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},ge={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},N=18,ye=M({__name:"EpisodeCard",props:{episode:{type:Object,required:!0},podcast:{type:Object,required:!0}},setup(e){const t=e,o=I(),l=P(()=>{var c;return o.podcastInit&&o.isPlaying&&((c=o.episode)==null?void 0:c.id)===t.episode.id}),u=w(!1),d=2*Math.PI*N,p=P(()=>o.currentTime),n=P(()=>o.duration),f=P(()=>{var c;return o.podcastInit&&((c=o.episode)==null?void 0:c.id)===t.episode.id?d-p.value/n.value*d:d}),$=()=>{u.value=!u.value};function h(c){if(!c||c<=0)return"N/A";const r=Math.floor(c/3600),m=Math.floor(c%3600/60),k=Math.floor(c%60),E=r>0?`${r}:`:"",L=m<10?`0${m}`:`${m}`,O=k<10?`0${k}`:`${k}`;return`${E}${L}:${O}`}function v(c,r){var m,k;((m=o.podcast)==null?void 0:m.id)===c.id&&(o.isPlaying||o.loading)&&((k=o.episode)==null?void 0:k.id)===r.id?o.stop():o.setEpisode(r,c)}return(c,r)=>(a(),i("div",X,[s("div",Y,[s("button",{onClick:r[0]||(r[0]=m=>v(e.podcast,e.episode)),class:"play-button relative mr-3 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full","aria-label":l.value?"Pause episode":"Play episode"},[r[3]||(r[3]=s("svg",{class:"absolute inset-0 h-full w-full",viewBox:"0 0 40 40"},[s("circle",{cx:"20",cy:"20",r:"19",fill:"none","stroke-width":"1.5"})],-1)),(a(),i("svg",te,[s("circle",{cx:"20",cy:"20",r:N,fill:"none","stroke-width":"2.5",class:"stroke-primary-800 dark:stroke-primary-300","stroke-linecap":"round","stroke-dasharray":d,"stroke-dashoffset":f.value,transform:"rotate(-90 20 20)",style:{transition:"stroke-dashoffset 0.3s ease"}},null,8,se)])),s("div",ae,[l.value?(a(),i("svg",oe,r[1]||(r[1]=[s("path",{"fill-rule":"evenodd",d:"M14.5 6.5a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-7Zm-6 0a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-7Z","clip-rule":"evenodd"},null,-1)]))):(a(),i("svg",re,r[2]||(r[2]=[s("path",{d:"M6.3 5.083c0-.62.69-.984 1.186-.643l7.429 4.417c.47.279.47.99 0 1.269l-7.429 4.417C6.99 14.92 6.3 14.556 6.3 13.937V5.083Z"},null,-1)])))])],8,ee),s("div",ie,[s("h3",le,y(e.episode.title),1),s("p",de,y(e.episode.datePublishedPretty||new Date(e.episode.datePublished*1e3).toLocaleDateString()),1)])]),s("div",ne,[s("button",{onClick:$,class:"hover:text-primary-600 dark:hover:text-primary-400 text-xs font-semibold tracking-wider text-gray-600 uppercase dark:text-gray-400"},[V(y(u.value?"Less":"More")+" ",1),u.value?(a(),i("svg",ue,r[5]||(r[5]=[s("path",{"fill-rule":"evenodd",d:"M14.78 11.78a.75.75 0 0 1-1.06 0L10 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.06l4.25-4.25a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"},null,-1)]))):(a(),i("svg",ce,r[4]||(r[4]=[s("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"},null,-1)])))]),u.value?(a(),i("div",pe,[s("p",null,y(e.episode.description),1),s("p",ge," Duration: "+y(h(e.episode.duration)),1)])):b("",!0)])]))}}),ve={class:"flex flex-col items-center text-center md:flex-1 md:items-start md:text-left"},fe={class:"text-3xl leading-tight font-bold text-gray-800 dark:text-gray-200"},me={class:"mt-2 mb-6 text-gray-600 dark:text-gray-400"},xe={class:"mb-6 flex items-center justify-center gap-6 md:justify-start"},he={key:0,class:"w-full animate-[fadeIn_0.3s_ease-out_forwards] text-left"},ke={class:"mb-4"},we={key:0,class:"flex flex-row gap-x-2"},be={key:1,class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},$e={class:"mb-4"},_e={class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},Pe={class:"mb-4"},Ee={class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},Ce=["href"],Me=M({__name:"PodcastBody",props:{podcast:{type:Object,required:!0},latestPodcast:{type:Object,required:!1}},setup(e){const t=I(),o=J(),l=w(!1);function u(){l.value=!l.value}function d(p,n){var f;((f=t.podcast)==null?void 0:f.id)===p.id&&(t.isPlaying||t.loading)?t.stop():t.podcastInit&&!t.isPlaying?t.turnOn():t.podcastInit&&t.isPlaying?t.turnOff():t.setEpisode(n,p)}return(p,n)=>{var f,$;return a(),i("div",ve,[s("h1",fe,y(e.podcast.title),1),s("p",me,y(e.podcast.description),1),s("div",xe,[e.latestPodcast?(a(),i("button",{key:0,onClick:n[0]||(n[0]=h=>d(e.podcast,e.latestPodcast)),class:"flex h-14 w-14 cursor-pointer items-center justify-center rounded-full bg-gray-900 text-white transition-colors hover:bg-gray-800 dark:bg-gray-50 dark:hover:bg-gray-300"},[g(t).loading&&((f=g(t).podcast)==null?void 0:f.id)===e.podcast.id?(a(),_(j(g(F)),{key:0,class:"h-6 w-6 animate-spin text-white dark:text-gray-900"})):(($=g(t).podcast)==null?void 0:$.id)===e.podcast.id&&g(t).isPlaying?(a(),_(j(g(B)),{key:1,class:"h-6 w-6 text-white dark:text-gray-900"})):(a(),_(j(g(D)),{key:2,class:"h-6 w-6 text-white dark:text-gray-900"}))])):b("",!0),s("button",{onClick:n[1]||(n[1]=h=>g(o).toggleFavorite(e.podcast)),class:"transition-colors"},[C(g(A),{class:Z(["h-6 w-6 cursor-pointer stroke-current",g(o).isFavorited(e.podcast.id)?"fill-gray-900 hover:fill-gray-800 dark:fill-[#e5e7eb] dark:hover:fill-gray-300":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"])},null,8,["class"])])]),s("button",{onClick:u,class:"mx-auto flex items-center justify-center bg-transparent py-2 font-medium text-gray-600 transition-colors hover:text-gray-900 md:mx-0 md:justify-start dark:text-gray-400 dark:hover:text-gray-200"},[s("span",null,y(l.value?"LESS INFORMATION":"MORE INFORMATION"),1),l.value?(a(),_(g(Q),{key:1,class:"ml-1 h-5 w-5"})):(a(),_(g(K),{key:0,class:"ml-1 h-5 w-5"}))]),n[5]||(n[5]=s("div",{class:"my-4 h-px w-full bg-black/10 dark:bg-white/10"},null,-1)),l.value?(a(),i("div",he,[s("div",ke,[n[2]||(n[2]=s("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Categories:",-1)),e.podcast.categories?(a(),i("div",we,[(a(!0),i(S,null,q(e.podcast.categories,h=>(a(),i("p",{key:h,class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},y(h),1))),128))])):(a(),i("div",be," No categories "))]),s("div",$e,[n[3]||(n[3]=s("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Language:",-1)),s("p",_e,y(e.podcast.language),1)]),s("div",Pe,[n[4]||(n[4]=s("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Website:",-1)),s("p",Ee,[s("a",{href:e.podcast.url,target:"_blank",rel:"noopener noreferrer"},y(e.podcast.url),9,Ce)])])])):b("",!0)])}}}),je={class:"mb-6 flex justify-center md:mr-8 md:mb-0 md:flex-shrink-0"},Se={class:"flex h-44 w-44 items-center justify-center overflow-hidden rounded-lg bg-white p-2 shadow-lg md:h-48 md:w-48 lg:h-52 lg:w-52 dark:bg-neutral-800"},Ne=["alt"],Ie=M({__name:"PodcastHeader",props:{podcastName:{type:String,required:!0},podcastFavicon:{type:String,required:!0}},setup(e){return(t,o)=>{const l=z("lazy");return a(),i("div",je,[s("div",Se,[R(s("img",{alt:`${e.podcastName} Logo`,class:"h-full w-full object-cover"},null,8,Ne),[[l,e.podcastFavicon]])])])}}}),x=(e,t)=>({url:x.url(e,t),method:"get"});x.definition={methods:["get","head"],url:"/api/podcasts/{id}/all-episodes"};x.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]});const o={id:e.id};return x.definition.url.replace("{id}",o.id.toString()).replace(/\/+$/,"")+H(t)};x.get=(e,t)=>({url:x.url(e,t),method:"get"});x.head=(e,t)=>({url:x.url(e,t),method:"head"});const qe={class:"mb-8 text-neutral-900 2xl:max-w-[80%] dark:text-neutral-50"},Le={class:"relative mb-6 flex w-full flex-col overflow-hidden rounded-lg bg-gradient-to-b from-green-400/80 via-green-200/40 to-transparent p-6 md:flex-row md:items-start md:p-8 dark:from-green-700/80 dark:via-green-900/40"},Oe={class:"space-y-2 divide-y divide-gray-200 dark:divide-gray-700"},Fe={key:0,class:"mt-4 flex justify-start"},Be={key:0},De={key:1},Ae={key:1,class:"mt-4 text-gray-500 dark:text-gray-400"},He={key:2,class:"mt-4 text-gray-500 dark:text-gray-400"},Te={key:3,class:"mt-4 text-gray-500 dark:text-gray-400"},Ge=M({layout:T,__name:"Podcast",props:{podcast:{type:Object,required:!0},initialEpisodes:{type:Array,required:!0},totalEpisodesHint:{type:Number,required:!0},episodesPerPage:{type:Number,required:!0},pageInfo:{type:Object,required:!0}},setup(e){const t=e,o=w([...t.initialEpisodes]),l=w(t.initialEpisodes.length),u=w(!1),d=w(t.initialEpisodes.length>=t.totalEpisodesHint),p=w(t.totalEpisodesHint),n=P(()=>o.value.slice(0,l.value)),f=P(()=>!d.value||l.value<p.value);async function $(){if(!d.value)try{const v=await G.get(x.url(t.podcast.id)),c=v.data.episodes,r=v.data.totalEpisodes,m=new Set(t.initialEpisodes.map(E=>E.id)),k=c.filter(E=>!m.has(E.id));o.value=[...t.initialEpisodes,...k],p.value=r,d.value=!0}catch(v){console.error("Failed to fetch all episodes:",v),d.value=!0}}async function h(){if(!(u.value||d.value&&l.value>=p.value)){u.value=!0;try{if(d.value||await $(),d.value){const v=Math.min(l.value+t.episodesPerPage,p.value);l.value=v}}catch(v){console.error("Error during showMoreEpisodes:",v)}finally{u.value=!1}}}return U(()=>{d.value=t.initialEpisodes.length>=t.totalEpisodesHint}),(v,c)=>(a(),i(S,null,[C(g(W),{title:e.pageInfo.title},null,8,["title"]),s("div",qe,[s("div",Le,[C(Ie,{podcastName:e.podcast.title,podcastFavicon:e.podcast.image},null,8,["podcastName","podcastFavicon"]),C(Me,{podcast:e.podcast,"latest-podcast":o.value[0]},null,8,["podcast","latest-podcast"])]),s("div",Oe,[(a(!0),i(S,null,q(n.value,r=>(a(),_(ye,{key:r.id,episode:r,podcast:e.podcast},null,8,["episode","podcast"]))),128))]),f.value&&!u.value?(a(),i("div",Fe,[s("div",{onClick:h,class:"cursor-pointer py-2 font-semibold text-gray-800 hover:text-green-700 disabled:opacity-50 dark:text-gray-300"},[d.value?(a(),i("span",De,"See More Episodes ("+y(l.value)+" / "+y(p.value)+")",1)):(a(),i("span",Be,"Load Episodes"))])])):b("",!0),u.value?(a(),i("div",Ae,"Loading...")):b("",!0),d.value&&l.value>=p.value&&p.value>0&&!u.value?(a(),i("div",He," All episodes shown. ")):b("",!0),d.value&&o.value.length===0&&!u.value?(a(),i("div",Te," No episodes found for this podcast. ")):b("",!0)])],64))}});export{Ge as default};
