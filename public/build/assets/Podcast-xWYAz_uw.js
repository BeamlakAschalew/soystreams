import{a as I,L as B,P as D,b as F,q as A,_ as T}from"./MainLayout.vue_vue_type_script_setup_true_lang-D-IxzxSB.js";import{d as C,e as $,k,c as i,o as a,f as s,t as p,h as w,i as H,g as _,u as g,l as j,a as P,F as S,j as q,m as V,n as Z,p as R,q as z,s as U}from"./app-CIqSgJxc.js";import{S as W,C as G,a as J}from"./share-DrAv0MPK.js";/* empty css            */const K={class:"episode-card py-4"},Q={class:"mb-2 flex items-center"},X=["aria-label"],Y={class:"absolute inset-0 h-full w-full",viewBox:"0 0 40 40"},ee=["stroke-dashoffset"],te={class:"relative z-10 flex items-center justify-center text-gray-800 dark:text-gray-300"},se={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-8 w-8"},ae={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-7 w-7"},oe={class:"flex-grow"},re={class:"text-md font-semibold text-gray-800 dark:text-gray-200"},ie={class:"text-sm text-gray-500 dark:text-gray-400"},le={class:"ml-[3.25rem]"},de={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"ml-1 inline-block h-4 w-4"},ne={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"ml-1 inline-block h-4 w-4"},ce={key:0,class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},ue={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},N=18,pe=C({__name:"EpisodeCard",props:{episode:{type:Object,required:!0},podcast:{type:Object,required:!0}},setup(e){const t=e,o=I(),u=$(()=>{var n;return o.podcastInit&&o.isPlaying&&((n=o.episode)==null?void 0:n.id)===t.episode.id}),c=k(!1),d=2*Math.PI*N,l=$(()=>o.currentTime),f=$(()=>o.duration),b=$(()=>{var n;return o.podcastInit&&((n=o.episode)==null?void 0:n.id)===t.episode.id?d-l.value/f.value*d:d}),x=()=>{c.value=!c.value};function M(n){if(!n||n<=0)return"N/A";const r=Math.floor(n/3600),v=Math.floor(n%3600/60),h=Math.floor(n%60),E=r>0?`${r}:`:"",L=v<10?`0${v}`:`${v}`,O=h<10?`0${h}`:`${h}`;return`${E}${L}:${O}`}function y(n,r){var v,h;((v=o.podcast)==null?void 0:v.id)===n.id&&(o.isPlaying||o.loading)&&((h=o.episode)==null?void 0:h.id)===r.id?o.stop():o.setEpisode(r,n)}return(n,r)=>(a(),i("div",K,[s("div",Q,[s("button",{onClick:r[0]||(r[0]=v=>y(e.podcast,e.episode)),class:"play-button relative mr-3 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full","aria-label":u.value?"Pause episode":"Play episode"},[r[3]||(r[3]=s("svg",{class:"absolute inset-0 h-full w-full",viewBox:"0 0 40 40"},[s("circle",{cx:"20",cy:"20",r:"19",fill:"none","stroke-width":"1.5"})],-1)),(a(),i("svg",Y,[s("circle",{cx:"20",cy:"20",r:N,fill:"none","stroke-width":"2.5",class:"stroke-primary-800 dark:stroke-primary-300","stroke-linecap":"round","stroke-dasharray":d,"stroke-dashoffset":b.value,transform:"rotate(-90 20 20)",style:{transition:"stroke-dashoffset 0.3s ease"}},null,8,ee)])),s("div",te,[u.value?(a(),i("svg",se,r[1]||(r[1]=[s("path",{"fill-rule":"evenodd",d:"M14.5 6.5a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-7Zm-6 0a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-7Z","clip-rule":"evenodd"},null,-1)]))):(a(),i("svg",ae,r[2]||(r[2]=[s("path",{d:"M6.3 5.083c0-.62.69-.984 1.186-.643l7.429 4.417c.47.279.47.99 0 1.269l-7.429 4.417C6.99 14.92 6.3 14.556 6.3 13.937V5.083Z"},null,-1)])))])],8,X),s("div",oe,[s("h3",re,p(e.episode.title),1),s("p",ie,p(e.episode.datePublishedPretty||new Date(e.episode.datePublished*1e3).toLocaleDateString()),1)])]),s("div",le,[s("button",{onClick:x,class:"hover:text-primary-600 dark:hover:text-primary-400 text-xs font-semibold tracking-wider text-gray-600 uppercase dark:text-gray-400"},[H(p(c.value?"Less":"More")+" ",1),c.value?(a(),i("svg",ne,r[5]||(r[5]=[s("path",{"fill-rule":"evenodd",d:"M14.78 11.78a.75.75 0 0 1-1.06 0L10 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.06l4.25-4.25a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"},null,-1)]))):(a(),i("svg",de,r[4]||(r[4]=[s("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"},null,-1)])))]),c.value?(a(),i("div",ce,[s("p",null,p(e.episode.description),1),s("p",ue," Duration: "+p(M(e.episode.duration)),1)])):w("",!0)])]))}}),ye={class:"flex flex-col items-center text-center md:flex-1 md:items-start md:text-left"},ge={class:"text-3xl leading-tight font-bold text-gray-800 dark:text-gray-200"},fe={class:"mt-2 mb-6 text-gray-600 dark:text-gray-400"},ve={class:"mb-6 flex items-center justify-center gap-6 md:justify-start"},me={class:"text-gray-600 transition-colors hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"},he={key:0,class:"w-full animate-[fadeIn_0.3s_ease-out_forwards] text-left"},xe={class:"mb-4"},ke={key:0,class:"flex flex-row gap-x-2"},we={key:1,class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},be={class:"mb-4"},_e={class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},$e={class:"mb-4"},Ee={class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},Pe=["href"],Ce=C({__name:"PodcastBody",props:{podcast:{type:Object,required:!0},latestPodcast:{type:Object,required:!1}},setup(e){const t=I(),o=k(!1);function u(){o.value=!o.value}function c(d,l){var f;((f=t.podcast)==null?void 0:f.id)===d.id&&(t.isPlaying||t.loading)?t.stop():t.podcastInit&&!t.isPlaying?t.turnOn():t.podcastInit&&t.isPlaying?t.turnOff():t.setEpisode(l,d)}return(d,l)=>{var f,b;return a(),i("div",ye,[s("h1",ge,p(e.podcast.title),1),s("p",fe,p(e.podcast.description),1),s("div",ve,[e.latestPodcast?(a(),i("button",{key:0,onClick:l[0]||(l[0]=x=>c(e.podcast,e.latestPodcast)),class:"flex h-14 w-14 cursor-pointer items-center justify-center rounded-full bg-gray-900 text-white transition-colors hover:bg-gray-800 dark:bg-gray-50 dark:hover:bg-gray-300"},[g(t).loading&&((f=g(t).podcast)==null?void 0:f.id)===e.podcast.id?(a(),_(j(g(B)),{key:0,class:"h-6 w-6 animate-spin text-white dark:text-gray-900"})):((b=g(t).podcast)==null?void 0:b.id)===e.podcast.id&&g(t).isPlaying?(a(),_(j(g(D)),{key:1,class:"h-6 w-6 text-white dark:text-gray-900"})):(a(),_(j(g(F)),{key:2,class:"h-6 w-6 text-white dark:text-gray-900"}))])):w("",!0),s("button",me,[P(g(W),{class:"h-6 w-6"})])]),s("button",{onClick:u,class:"mx-auto flex items-center justify-center bg-transparent py-2 font-medium text-gray-600 transition-colors hover:text-gray-900 md:mx-0 md:justify-start dark:text-gray-400 dark:hover:text-gray-200"},[s("span",null,p(o.value?"LESS INFORMATION":"MORE INFORMATION"),1),o.value?(a(),_(g(J),{key:1,class:"ml-1 h-5 w-5"})):(a(),_(g(G),{key:0,class:"ml-1 h-5 w-5"}))]),l[4]||(l[4]=s("div",{class:"my-4 h-px w-full bg-black/10 dark:bg-white/10"},null,-1)),o.value?(a(),i("div",he,[s("div",xe,[l[1]||(l[1]=s("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Categories:",-1)),e.podcast.categories?(a(),i("div",ke,[(a(!0),i(S,null,q(e.podcast.categories,x=>(a(),i("p",{key:x,class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},p(x),1))),128))])):(a(),i("div",we," No categories "))]),s("div",be,[l[2]||(l[2]=s("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Language:",-1)),s("p",_e,p(e.podcast.language),1)]),s("div",$e,[l[3]||(l[3]=s("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Website:",-1)),s("p",Ee,[s("a",{href:e.podcast.url,target:"_blank",rel:"noopener noreferrer"},p(e.podcast.url),9,Pe)])])])):w("",!0)])}}}),Me={class:"mb-6 flex justify-center md:mr-8 md:mb-0 md:flex-shrink-0"},je={class:"flex h-44 w-44 items-center justify-center overflow-hidden rounded-lg bg-white p-2 shadow-lg md:h-48 md:w-48 lg:h-52 lg:w-52 dark:bg-neutral-800"},Se=["alt"],Ne=C({__name:"PodcastHeader",props:{podcastName:{type:String,required:!0},podcastFavicon:{type:String,required:!0}},setup(e){return(t,o)=>{const u=V("lazy");return a(),i("div",Me,[s("div",je,[Z(s("img",{alt:`${e.podcastName} Logo`,class:"h-full w-full object-cover"},null,8,Se),[[u,e.podcastFavicon]])])])}}}),m=(e,t)=>({url:m.url(e,t),method:"get"});m.definition={methods:["get","head"],url:"/api/podcasts/{id}/all-episodes"};m.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]});const o={id:e.id};return m.definition.url.replace("{id}",o.id.toString()).replace(/\/+$/,"")+A(t)};m.get=(e,t)=>({url:m.url(e,t),method:"get"});m.head=(e,t)=>({url:m.url(e,t),method:"head"});const Ie={class:"mb-8 text-neutral-900 2xl:max-w-[80%] dark:text-neutral-50"},qe={class:"relative mb-6 flex w-full flex-col overflow-hidden rounded-lg bg-gradient-to-b from-green-400/80 via-green-200/40 to-transparent p-6 md:flex-row md:items-start md:p-8 dark:from-green-700/80 dark:via-green-900/40"},Le={class:"space-y-2 divide-y divide-gray-200 dark:divide-gray-700"},Oe={key:0,class:"mt-4 flex justify-start"},Be={key:0},De={key:1},Fe={key:1,class:"mt-4 text-gray-500 dark:text-gray-400"},Ae={key:2,class:"mt-4 text-gray-500 dark:text-gray-400"},Te={key:3,class:"mt-4 text-gray-500 dark:text-gray-400"},ze=C({layout:T,__name:"Podcast",props:{podcast:{type:Object,required:!0},initialEpisodes:{type:Array,required:!0},totalEpisodesHint:{type:Number,required:!0},episodesPerPage:{type:Number,required:!0},pageInfo:{type:Object,required:!0}},setup(e){const t=e,o=k([...t.initialEpisodes]),u=k(t.initialEpisodes.length),c=k(!1),d=k(t.initialEpisodes.length>=t.totalEpisodesHint),l=k(t.totalEpisodesHint),f=$(()=>o.value.slice(0,u.value)),b=$(()=>!d.value||u.value<l.value);async function x(){if(!d.value)try{const y=await U.get(m.url(t.podcast.id)),n=y.data.episodes,r=y.data.totalEpisodes,v=new Set(t.initialEpisodes.map(E=>E.id)),h=n.filter(E=>!v.has(E.id));o.value=[...t.initialEpisodes,...h],l.value=r,d.value=!0}catch(y){console.error("Failed to fetch all episodes:",y),d.value=!0}}async function M(){if(!(c.value||d.value&&u.value>=l.value)){c.value=!0;try{if(d.value||await x(),d.value){const y=Math.min(u.value+t.episodesPerPage,l.value);u.value=y}}catch(y){console.error("Error during showMoreEpisodes:",y)}finally{c.value=!1}}}return R(()=>{d.value=t.initialEpisodes.length>=t.totalEpisodesHint}),(y,n)=>(a(),i(S,null,[P(g(z),{title:e.pageInfo.title},null,8,["title"]),s("div",Ie,[s("div",qe,[P(Ne,{podcastName:e.podcast.title,podcastFavicon:e.podcast.image},null,8,["podcastName","podcastFavicon"]),P(Ce,{podcast:e.podcast,"latest-podcast":o.value[0]},null,8,["podcast","latest-podcast"])]),s("div",Le,[(a(!0),i(S,null,q(f.value,r=>(a(),_(pe,{key:r.id,episode:r,podcast:e.podcast},null,8,["episode","podcast"]))),128))]),b.value&&!c.value?(a(),i("div",Oe,[s("div",{onClick:M,class:"cursor-pointer py-2 font-semibold text-gray-800 hover:text-green-700 disabled:opacity-50 dark:text-gray-300"},[d.value?(a(),i("span",De,"See More Episodes ("+p(u.value)+" / "+p(l.value)+")",1)):(a(),i("span",Be,"Load Episodes"))])])):w("",!0),c.value?(a(),i("div",Fe,"Loading...")):w("",!0),d.value&&u.value>=l.value&&l.value>0&&!c.value?(a(),i("div",Ae," All episodes shown. ")):w("",!0),d.value&&o.value.length===0&&!c.value?(a(),i("div",Te," No episodes found for this podcast. ")):w("",!0)])],64))}});export{ze as default};
