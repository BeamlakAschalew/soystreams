import{d as b,l as f,m as M,c as o,o as a,f as t,t as c,i as h,j as I,h as m,n as C,u as v,a as _,F as S,k as q,e as D,g as F,p as A,q as O,s as H}from"./app-DtAG2CNg.js";import{L as T,P as V,a as Z,q as R,_ as z}from"./MainLayout.vue_vue_type_script_setup_true_lang-yIDBWnFS.js";import{S as U,C as W,a as G}from"./share-BjBpCGa9.js";/* empty css            */const J={class:"episode-card py-4"},K={class:"mb-2 flex items-center"},Q=["aria-label"],X={class:"absolute inset-0 h-full w-full",viewBox:"0 0 40 40"},Y=["stroke-dashoffset"],ee={class:"relative z-10 flex items-center justify-center text-gray-800 dark:text-gray-300"},te={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-7 w-7"},se={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-7 w-7"},ae={class:"flex-grow"},re={class:"text-md font-semibold text-gray-800 dark:text-gray-200"},oe={class:"text-sm text-gray-500 dark:text-gray-400"},le={class:"ml-[3.25rem]"},ie={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"ml-1 inline-block h-4 w-4"},ne={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"ml-1 inline-block h-4 w-4"},de={key:0,class:"mt-2 text-sm text-gray-700 dark:text-gray-300"},ce={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},j=18,ue=b({__name:"EpisodeCard",props:{title:{type:String,required:!0},date:{type:String,required:!0},description:{type:String,required:!0},duration:{type:String,required:!0},isPlaying:{type:Boolean,default:!1},progress:{type:Number,default:0,validator:e=>e>=0&&e<=100}},emits:["toggle-play","show-details"],setup(e,{emit:s}){const y=e,l=s,n=f(!1),r=2*Math.PI*j,d=M(()=>r-y.progress/100*r),$=()=>{l("toggle-play")},E=()=>{n.value=!n.value};return(N,u)=>(a(),o("div",J,[t("div",K,[t("button",{onClick:$,class:"play-button focus:ring-primary-500 relative mr-3 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full focus:ring-2 focus:ring-offset-2 focus:outline-none dark:focus:ring-offset-gray-800","aria-label":e.isPlaying?"Pause episode":"Play episode"},[u[2]||(u[2]=t("svg",{class:"absolute inset-0 h-full w-full",viewBox:"0 0 40 40"},[t("circle",{cx:"20",cy:"20",r:"19",fill:"none","stroke-width":"1.5"})],-1)),(a(),o("svg",X,[t("circle",{cx:"20",cy:"20",r:j,fill:"none","stroke-width":"2.5",class:"stroke-primary-800 dark:stroke-primary-300","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":d.value,transform:"rotate(-90 20 20)",style:{transition:"stroke-dashoffset 0.3s ease"}},null,8,Y)])),t("div",ee,[e.isPlaying?(a(),o("svg",te,u[0]||(u[0]=[t("path",{"fill-rule":"evenodd",d:"M14.5 6.5a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-7Zm-6 0a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-7Z","clip-rule":"evenodd"},null,-1)]))):(a(),o("svg",se,u[1]||(u[1]=[t("path",{d:"M6.3 5.083c0-.62.69-.984 1.186-.643l7.429 4.417c.47.279.47.99 0 1.269l-7.429 4.417C6.99 14.92 6.3 14.556 6.3 13.937V5.083Z"},null,-1)])))])],8,Q),t("div",ae,[t("h3",re,c(e.title),1),t("p",oe,c(e.date),1)])]),t("div",le,[t("button",{onClick:E,class:"hover:text-primary-600 dark:hover:text-primary-400 text-xs font-semibold tracking-wider text-gray-600 uppercase dark:text-gray-400"},[I(c(n.value?"Less":"More")+" ",1),n.value?(a(),o("svg",ne,u[4]||(u[4]=[t("path",{"fill-rule":"evenodd",d:"M14.78 11.78a.75.75 0 0 1-1.06 0L10 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.06l4.25-4.25a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"},null,-1)]))):(a(),o("svg",ie,u[3]||(u[3]=[t("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"},null,-1)])))]),n.value?(a(),o("div",de,[t("p",null,c(e.description),1),t("p",ce," Duration: "+c(e.duration),1)])):h("",!0)])]))}}),ge={class:"flex flex-col items-center text-center md:flex-1 md:items-start md:text-left"},ye={class:"text-3xl leading-tight font-bold text-gray-800 dark:text-gray-200"},pe={class:"mt-2 mb-6 text-gray-600 dark:text-gray-400"},fe={class:"mb-6 flex items-center justify-center gap-6 md:justify-start"},ve={class:"text-gray-600 transition-colors hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"},me={key:0,class:"w-full animate-[fadeIn_0.3s_ease-out_forwards] text-left"},he={class:"mb-4"},xe={key:0,class:"flex flex-row gap-x-2"},ke={key:1,class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},we={class:"mb-4"},_e={class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},be={class:"mb-4"},$e={class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},Ee=["href"],Pe=b({__name:"PodcastBody",props:{podcast:{type:Object,required:!0}},setup(e){const s=f(!1);function y(){s.value=!s.value}const l=f(!1);return(n,r)=>(a(),o("div",ge,[t("h1",ye,c(e.podcast.title),1),t("p",pe,c(e.podcast.description),1),t("div",fe,[t("button",{onClick:r[0]||(r[0]=d=>l.value=!l.value),class:"flex h-14 w-14 cursor-pointer items-center justify-center rounded-full bg-gray-900 text-white transition-colors hover:bg-gray-800 dark:bg-gray-50 dark:hover:bg-gray-300"},[l.value?(a(),m(C(v(T)),{key:0,class:"h-6 w-6 animate-spin text-white dark:text-gray-900"})):l.value?(a(),m(C(v(Z)),{key:2,class:"h-6 w-6 text-white dark:text-gray-900"})):(a(),m(C(v(V)),{key:1,class:"h-6 w-6 text-white dark:text-gray-900"}))]),t("button",ve,[_(v(U),{class:"h-6 w-6"})])]),t("button",{onClick:y,class:"mx-auto flex items-center justify-center bg-transparent py-2 font-medium text-gray-600 transition-colors hover:text-gray-900 md:mx-0 md:justify-start dark:text-gray-400 dark:hover:text-gray-200"},[t("span",null,c(s.value?"LESS INFORMATION":"MORE INFORMATION"),1),s.value?(a(),m(v(G),{key:1,class:"ml-1 h-5 w-5"})):(a(),m(v(W),{key:0,class:"ml-1 h-5 w-5"}))]),r[4]||(r[4]=t("div",{class:"my-4 h-px w-full bg-black/10 dark:bg-white/10"},null,-1)),s.value?(a(),o("div",me,[t("div",he,[r[1]||(r[1]=t("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Categories:",-1)),e.podcast.categories?(a(),o("div",xe,[(a(!0),o(S,null,q(e.podcast.categories,d=>(a(),o("p",{key:d,class:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400"},c(d),1))),128))])):(a(),o("div",ke," No categories "))]),t("div",we,[r[2]||(r[2]=t("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Language:",-1)),t("p",_e,c(e.podcast.language),1)]),t("div",be,[r[3]||(r[3]=t("h3",{class:"mb-1 font-semibold text-gray-800 dark:text-gray-200"},"Website:",-1)),t("p",$e,[t("a",{href:e.podcast.url,target:"_blank",rel:"noopener noreferrer"},c(e.podcast.url),9,Ee)])])])):h("",!0)]))}}),Ce={class:"mb-6 flex justify-center md:mr-8 md:mb-0 md:flex-shrink-0"},Me={class:"flex h-44 w-44 items-center justify-center overflow-hidden rounded-lg bg-white p-2 shadow-lg md:h-48 md:w-48 lg:h-52 lg:w-52 dark:bg-neutral-800"},Se=["alt"],Ne=b({__name:"PodcastHeader",props:{podcastName:{type:String,required:!0},podcastFavicon:{type:String,required:!0}},setup(e){return(s,y)=>{const l=D("lazy");return a(),o("div",Ce,[t("div",Me,[F(t("img",{alt:`${e.podcastName} Logo`,class:"h-full w-full object-cover"},null,8,Se),[[l,e.podcastFavicon]])])])}}}),p=(e,s)=>({url:p.url(e,s),method:"get"});p.definition={methods:["get","head"],url:"/api/podcasts/{id}/all-episodes"};p.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]});const y={id:e.id};return p.definition.url.replace("{id}",y.id.toString()).replace(/\/+$/,"")+R(s)};p.get=(e,s)=>({url:p.url(e,s),method:"get"});p.head=(e,s)=>({url:p.url(e,s),method:"head"});const je={class:"mb-8 text-neutral-900 2xl:max-w-[80%] dark:text-neutral-50"},qe={class:"relative mb-6 flex w-full flex-col overflow-hidden rounded-lg bg-gradient-to-b from-green-400/80 via-green-200/40 to-transparent p-6 md:flex-row md:items-start md:p-8 dark:from-green-700/80 dark:via-green-900/40"},Le={class:"space-y-2 divide-y divide-gray-200 dark:divide-gray-700"},Be={key:0,class:"mt-4 flex justify-start"},Ie={key:0},De={key:1},Fe={key:1,class:"mt-4 text-gray-500 dark:text-gray-400"},Ae={key:2,class:"mt-4 text-center text-gray-500 dark:text-gray-400"},Oe={key:3,class:"mt-4 text-center text-gray-500 dark:text-gray-400"},Re=b({layout:z,__name:"Podcast",props:{podcast:{type:Object,required:!0},initialEpisodes:{type:Array,required:!0},totalEpisodesHint:{type:Number,required:!0},episodesPerPage:{type:Number,required:!0},pageInfo:{type:Object,required:!0}},setup(e){const s=e,y=f([...s.initialEpisodes]),l=f(s.initialEpisodes.length),n=f(!1),r=f(s.initialEpisodes.length>=s.totalEpisodesHint),d=f(s.totalEpisodesHint),$=M(()=>y.value.slice(0,l.value)),E=M(()=>!r.value||l.value<d.value);async function N(){if(!r.value)try{const i=await H.get(p.url(s.podcast.id)),x=i.data.episodes,g=i.data.totalEpisodes,k=new Set(s.initialEpisodes.map(w=>w.id)),P=x.filter(w=>!k.has(w.id));y.value=[...s.initialEpisodes,...P],d.value=g,r.value=!0}catch(i){console.error("Failed to fetch all episodes:",i),r.value=!0}}async function u(){if(!(n.value||r.value&&l.value>=d.value)){n.value=!0;try{if(r.value||await N(),r.value){const i=Math.min(l.value+s.episodesPerPage,d.value);l.value=i}}catch(i){console.error("Error during showMoreEpisodes:",i)}finally{n.value=!1}}}A(()=>{r.value=s.initialEpisodes.length>=s.totalEpisodesHint});function L(i){if(!i||i<=0)return"N/A";const x=Math.floor(i/3600),g=Math.floor(i%3600/60),k=Math.floor(i%60),P=x>0?`${x}:`:"",w=g<10?`0${g}`:`${g}`,B=k<10?`0${k}`:`${k}`;return`${P}${w}:${B}`}return(i,x)=>(a(),o(S,null,[_(v(O),{title:e.pageInfo.title},null,8,["title"]),t("div",je,[t("div",qe,[_(Ne,{podcastName:e.podcast.title,podcastFavicon:e.podcast.image},null,8,["podcastName","podcastFavicon"]),_(Pe,{podcast:e.podcast},null,8,["podcast"])]),t("div",Le,[(a(!0),o(S,null,q($.value,g=>(a(),m(ue,{key:g.id,title:g.title,date:g.datePublishedPretty||new Date(g.datePublished*1e3).toLocaleDateString(),description:g.description,duration:L(g.duration),isPlaying:!1,progress:70,onTogglePlay:()=>{}},null,8,["title","date","description","duration"]))),128))]),E.value&&!n.value?(a(),o("div",Be,[t("div",{onClick:u,class:"cursor-pointer py-2 font-semibold text-gray-800 hover:text-green-700 disabled:opacity-50 dark:text-gray-300"},[r.value?(a(),o("span",De,"See More Episodes ("+c(l.value)+" / "+c(d.value)+")",1)):(a(),o("span",Ie,"Load Episodes"))])])):h("",!0),n.value?(a(),o("div",Fe,"Loading...")):h("",!0),r.value&&l.value>=d.value&&d.value>0&&!n.value?(a(),o("div",Ae," All episodes shown. ")):h("",!0),r.value&&y.value.length===0&&!n.value?(a(),o("div",Oe," No episodes found for this podcast. ")):h("",!0)])],64))}});export{Re as default};
